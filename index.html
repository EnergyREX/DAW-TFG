<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
async function getData(url = '', data = {}) {
  const response = await fetch(url, {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json',
    },
  });

  console.log("HTTP Status Code:", response.status); // Verifica el código de estado
  console.log("Raw Response:", response); // Verifica el objeto de la respuesta

  const text = await response.text(); // Obtén la respuesta como texto
  console.log("Raw Response Text:", text); // Muestra el texto para debug

  try {
    return JSON.parse(text); // Intenta parsear la respuesta como JSON
  } catch (error) {
    console.error("Error parsing JSON:", error); // Log del error si ocurre
    throw new Error("La respuesta no es un JSON válido");
  }
}

getData('http://localhost:3000/controllers/treatmentsController.php', { answer: 42 })
  .then(data => console.log("Parsed Data:", data))
  .catch(error => console.error("Error:", error));

  </script>
</body>
</html>